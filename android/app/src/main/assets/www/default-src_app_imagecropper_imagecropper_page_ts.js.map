{"version":3,"sources":["./src/app/imagecropper/imagecropper.page.ts","./node_modules/ngx-image-cropper/fesm2020/ngx-image-cropper.mjs","./src/app/imagecropper/imagecropper.page.scss","./src/app/imagecropper/imagecropper.page.html"],"names":["i0","CropperSettings","constructor","format","maintainAspectRatio","transform","aspectRatio","resizeToWidth","resizeToHeight","cropperMinWidth","cropperMinHeight","cropperMaxHeight","cropperMaxWidth","cropperStaticWidth","cropperStaticHeight","canvasRotation","initialStepSize","roundCropper","onlyScaleDown","imageQuality","autoCrop","backgroundColor","containWithinAspectRatio","hideResizeSquares","alignImage","cropperScaledMinWidth","cropperScaledMinHeight","cropperScaledMaxWidth","cropperScaledMaxHeight","stepSize","setOptions","options","Object","keys","filter","k","forEach","validateOptions","setOptionsFromChanges","changes","currentValue","Error","MoveTypes","getPositionForKey","key","getInvertedPositionForKey","getEventForKey","clientX","clientY","resizeCanvas","canvas","width","height","width_source","height_source","Math","round","ratio_w","ratio_h","ratio_w_half","ceil","ratio_h_half","ctx","getContext","img","getImageData","img2","createImageData","data","data2","j","i","x2","center_y","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","xx_start","floor","yy_start","xx_stop","yy_stop","min","yy","dy","abs","center_x","w0","xx","dx","w","sqrt","pos_x","putImageData","percentage","percent","totalValue","CropService","crop","sourceImage","loadedImage","cropper","settings","imagePosition","getImagePosition","x1","y2","y1","cropCanvas","document","createElement","fillStyle","fillRect","scaleX","scale","flipH","scaleY","flipV","transformedImage","transformed","setTransform","size","translate","rotate","PI","translateH","translateV","getCanvasTranslate","drawImage","image","output","cropperPosition","offsetImagePosition","getOffsetImagePosition","resizeRatio","getResizeRatio","base64","toDataURL","getQuality","translateUnit","ratio","getRatio","sourceImageElement","nativeElement","offsetWidth","out","max","exifTransform","offsetX","offsetY","original","ratioWidth","ratioHeight","ratios","Array","push","result","length","ɵfac","ɵprov","type","Injectable","args","providedIn","CropperPositionService","resetCropperPosition","offsetHeight","cropperWidth","cropperHeight","cropperHeightWithAspectRatio","cropperWidthWithAspectRatio","move","event","moveStart","diffX","getClientX","diffY","getClientY","resize","maxSize","moveX","moveY","position","newWidth","newHeight","checkAspectRatio","overflowX","overflowY","overflowX1","overflowX2","overflowY1","overflowY2","touches","testAutoOrientationImageURL","supportsAutomaticRotation","Promise","resolve","Image","onload","supported","src","getTransformationsFromExifData","exifRotationOrBase64Image","getExifRotation","flip","imageBase64","view","DataView","base64ToArrayBuffer","getUint16","byteLength","offset","marker","getUint32","little","tags","replace","binaryString","atob","len","bytes","Uint8Array","charCodeAt","buffer","LoadImageService","autoRotateSupported","loadImageFile","file","cropperSettings","reject","fileReader","FileReader","loadImage","target","then","catch","readAsDataURL","imageType","isValidImageType","loadBase64Image","test","loadImageFromURL","url","onerror","context","crossOrigin","originalImage","originalBase64","res","transformImageBase64","autoRotate","complete","naturalWidth","naturalHeight","transformLoadedImage","originalSize","transformedSize","getTransformedSize","transformedBase64","loadImageFromBase64","minWidthToContain","minHeightToContain","ImageCropperComponent","cropService","cropperPositionService","loadImageService","sanitizer","cd","Hammer","window","setImageMaxSizeRetries","marginLeft","moveTypes","imageVisible","allowMoveImage","disabled","imageCropped","EventEmitter","startCropImage","imageLoaded","cropperReady","loadImageFailed","transformChange","reset","ngOnChanges","onChangesUpdateSettings","onChangesInputImage","setLoadedImage","err","loadImageError","setMaxSize","setCropperScaledMinSize","setCropperScaledMaxSize","checkCropperPosition","doAutoCrop","markForCheck","setCssTransform","isValidImageChangedEvent","imageChangedEvent","files","imageURL","imageFile","safeTransformStyle","bypassSecurityTrustStyle","ngOnInit","activatePinchGesture","undefined","safeImgDataUrl","active","bypassSecurityTrustResourceUrl","error","console","emit","imageLoadedInView","setTimeout","checkImageMaxSizeRecursively","sourceImageLoaded","onResize","resizeCropperPosition","hammer","wrapper","get","set","enable","on","onPinch","bind","pinchStop","startPinch","isDevMode","warn","keyboardAccess","changeKeyboardStepSize","keyboardMoveCropper","keyboardWhiteList","includes","moveType","shiftKey","Resize","Move","altKey","moveEvent","preventDefault","stopPropagation","startMove","moveImg","moveStop","Pinch","Drag","detectChanges","setCropperScaledMinWidth","setCropperScaledMinHeight","maintainSize","i4","ɵcmp","i5","Component","selector","changeDetection","ChangeDetectionStrategy","template","styles","DomSanitizer","ChangeDetectorRef","ViewChild","static","Input","HostBinding","Output","HostListener","ImageCropperModule","ɵmod","CommonModule","ɵinj","NgModule","imports","declarations","exports","base64ToFile","base64Image","split","byteString","ab","ArrayBuffer","ia","Blob"],"mappings":"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","file":"default-src_app_imagecropper_imagecropper_page_ts.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { ModalController, NavParams } from '@ionic/angular';\nimport { ImageCroppedEvent, ImageCropperComponent } from 'ngx-image-cropper';\nimport { LoaderService } from '../loader.service';\nimport { Observable, Observer } from 'rxjs';\n\n@Component({\n  selector: 'app-imagecropper',\n  templateUrl: './imagecropper.page.html',\n  styleUrls: ['./imagecropper.page.scss'],\n})\nexport class ImagecropperPage implements OnInit {\n  sourcetype: any;\n  imgid: any;\n  croppedimage: any;\n  cropImage: any;\n  namelength: any;\n\n  @ViewChild(ImageCropperComponent, { static: false })\n  angularCropper: ImageCropperComponent;\n  picture: string;\n  Myimage: any;\n\n  constructor(public navparams: NavParams,\n    private camera: Camera,\n    private alert:LoaderService,\n    private transfer: FileTransfer,\n    public modalctrl: ModalController) {\n      this.sourcetype = this.navparams.get('source')\n      this.imgid = this.navparams.get('image_id')\n      console.log(this.sourcetype)\n      console.log(this.imgid)\n     }\n\n  ngOnInit() {\n    console.log('imagecropper page')\n    this.pickImage()\n  }\n\n  pickImage() {\n    const options: CameraOptions = {\n      quality: 100,\n      sourceType: this.sourcetype,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      correctOrientation: true,\n      cameraDirection: 1,\n    }\n    this.alert.showLoader();\n    this.camera.getPicture(options).then((imageData) => {\n      let base64Image = 'data:image/png;base64,' + imageData;\n      this.picture = base64Image;\n      console.log(this.picture)\n      // this.upload(this.picture);\n      this.convertFileToDataURLviaFileReader(this.picture).subscribe(base64 => {\n        this.cropImage = base64;\n      }\n      );\n    },\n      (err) => {\n        console.log(err);\n      });\n  }\n\n\n  convertFileToDataURLviaFileReader(url: string) {\n    return new Observable((observer: Observer<any>) => {\n      let xhr: XMLHttpRequest = new XMLHttpRequest();\n      xhr.onload = function () {\n        let reader: FileReader = new FileReader();\n        reader.onloadend = function () {\n          observer.next(reader.result);\n          observer.complete();\n        };\n        reader.readAsDataURL(xhr.response);\n      };\n      xhr.open('GET', url);\n      xhr.responseType = 'blob';\n      xhr.send();\n    });\n  }\n\n  imageCropped(event: ImageCroppedEvent) {\n    this.alert.dissmissLoader();\n    this.croppedimage = event.base64\n  }\n\n  save() {\n    this.angularCropper.crop();\n    // this.alert.showLoader();\n    this.modalctrl.dismiss({'image':this.croppedimage,'imageid':this.imgid})\n\n    // this.upload(this.croppedimage)\n  }\n\n  clear() {\n    this.modalctrl.dismiss()\n    this.angularCropper.imageBase64 = null;\n    this.Myimage = null;\n    this.cropImage = null;\n  }\n\n  // upload(image) {\n  //   var d = new Date();\n  //   var n = d.getTime();\n  //   let options: FileUploadOptions = {\n  //     fileKey: \"image\",\n  //     fileName: \"image_\" + n.toString() + \".png\",\n  //     chunkedMode: false,\n  //     mimeType: \"image/png\"\n  //   }; console.log(options)\n  //   const fileTransfer: FileTransferObject = this.transfer.create();\n  //   fileTransfer.upload(image, this.config.url + 'imagevideoupload.php', options)\n  //     .then((data) => {\n\n  //       console.log(\"data:\", data.response)\n  //       var imgdata = JSON.parse(data.response)\n  //       console.log(imgdata)\n  //       if (imgdata.ResponseCode == 1) {\n  //         console.log(imgdata.image_url)\n  //         this.userpic = imgdata.image_url\n  //         this.Myimage = this.config.imgurl + this.userpic\n  //         this.alert.dissmissLoader();\n  //         console.log(this.Myimage)\n  //         // alert('Image Uploaded')\n  //       }\n  //     })\n  // }\n\n}\n","import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, isDevMode, Component, ChangeDetectionStrategy, ViewChild, Input, HostBinding, Output, HostListener, NgModule } from '@angular/core';\nimport * as i4 from '@angular/platform-browser';\nimport * as i5 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\nclass CropperSettings {\n    constructor() {\n        // From options\n        this.format = 'png';\n        this.maintainAspectRatio = true;\n        this.transform = {};\n        this.aspectRatio = 1;\n        this.resizeToWidth = 0;\n        this.resizeToHeight = 0;\n        this.cropperMinWidth = 0;\n        this.cropperMinHeight = 0;\n        this.cropperMaxHeight = 0;\n        this.cropperMaxWidth = 0;\n        this.cropperStaticWidth = 0;\n        this.cropperStaticHeight = 0;\n        this.canvasRotation = 0;\n        this.initialStepSize = 3;\n        this.roundCropper = false;\n        this.onlyScaleDown = false;\n        this.imageQuality = 92;\n        this.autoCrop = true;\n        this.backgroundColor = null;\n        this.containWithinAspectRatio = false;\n        this.hideResizeSquares = false;\n        this.alignImage = 'center';\n        // Internal\n        this.cropperScaledMinWidth = 20;\n        this.cropperScaledMinHeight = 20;\n        this.cropperScaledMaxWidth = 20;\n        this.cropperScaledMaxHeight = 20;\n        this.stepSize = this.initialStepSize;\n    }\n    setOptions(options) {\n        Object.keys(options)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = options[k]);\n        this.validateOptions();\n    }\n    setOptionsFromChanges(changes) {\n        Object.keys(changes)\n            .filter((k) => k in this)\n            .forEach((k) => this[k] = changes[k].currentValue);\n        this.validateOptions();\n    }\n    validateOptions() {\n        if (this.maintainAspectRatio && !this.aspectRatio) {\n            throw new Error('`aspectRatio` should > 0 when `maintainAspectRatio` is enabled');\n        }\n    }\n}\n\nvar MoveTypes;\n(function (MoveTypes) {\n    MoveTypes[\"Drag\"] = \"drag\";\n    MoveTypes[\"Move\"] = \"move\";\n    MoveTypes[\"Resize\"] = \"resize\";\n    MoveTypes[\"Pinch\"] = \"pinch\";\n})(MoveTypes || (MoveTypes = {}));\n\nfunction getPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'top';\n        case 'ArrowRight':\n            return 'right';\n        case 'ArrowDown':\n            return 'bottom';\n        case 'ArrowLeft':\n        default:\n            return 'left';\n    }\n}\nfunction getInvertedPositionForKey(key) {\n    switch (key) {\n        case 'ArrowUp':\n            return 'bottom';\n        case 'ArrowRight':\n            return 'left';\n        case 'ArrowDown':\n            return 'top';\n        case 'ArrowLeft':\n        default:\n            return 'right';\n    }\n}\nfunction getEventForKey(key, stepSize) {\n    switch (key) {\n        case 'ArrowUp':\n            return { clientX: 0, clientY: stepSize * -1 };\n        case 'ArrowRight':\n            return { clientX: stepSize, clientY: 0 };\n        case 'ArrowDown':\n            return { clientX: 0, clientY: stepSize };\n        case 'ArrowLeft':\n        default:\n            return { clientX: stepSize * -1, clientY: 0 };\n    }\n}\n\n/*\n * Hermite resize - fast image resize/resample using Hermite filter.\n * https://github.com/viliusle/Hermite-resize\n */\nfunction resizeCanvas(canvas, width, height) {\n    const width_source = canvas.width;\n    const height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n    const ratio_w = width_source / width;\n    const ratio_h = height_source / height;\n    const ratio_w_half = Math.ceil(ratio_w / 2);\n    const ratio_h_half = Math.ceil(ratio_h / 2);\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n        const img = ctx.getImageData(0, 0, width_source, height_source);\n        const img2 = ctx.createImageData(width, height);\n        const data = img.data;\n        const data2 = img2.data;\n        for (let j = 0; j < height; j++) {\n            for (let i = 0; i < width; i++) {\n                const x2 = (i + j * width) * 4;\n                const center_y = j * ratio_h;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0;\n                let gx_g = 0;\n                let gx_b = 0;\n                let gx_a = 0;\n                const xx_start = Math.floor(i * ratio_w);\n                const yy_start = Math.floor(j * ratio_h);\n                let xx_stop = Math.ceil((i + 1) * ratio_w);\n                let yy_stop = Math.ceil((j + 1) * ratio_h);\n                xx_stop = Math.min(xx_stop, width_source);\n                yy_stop = Math.min(yy_stop, height_source);\n                for (let yy = yy_start; yy < yy_stop; yy++) {\n                    const dy = Math.abs(center_y - yy) / ratio_h_half;\n                    const center_x = i * ratio_w;\n                    const w0 = dy * dy; //pre-calc part of w\n                    for (let xx = xx_start; xx < xx_stop; xx++) {\n                        const dx = Math.abs(center_x - xx) / ratio_w_half;\n                        const w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            //pixel too far\n                            continue;\n                        }\n                        //hermite filter\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        const pos_x = 4 * (xx + yy * width_source);\n                        //alpha\n                        gx_a += weight * data[pos_x + 3];\n                        weights_alpha += weight;\n                        //colors\n                        if (data[pos_x + 3] < 255)\n                            weight = weight * data[pos_x + 3] / 250;\n                        gx_r += weight * data[pos_x];\n                        gx_g += weight * data[pos_x + 1];\n                        gx_b += weight * data[pos_x + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        canvas.width = width;\n        canvas.height = height;\n        //draw\n        ctx.putImageData(img2, 0, 0);\n    }\n}\n\nfunction percentage(percent, totalValue) {\n    return (percent / 100) * totalValue;\n}\n\nclass CropService {\n    crop(sourceImage, loadedImage, cropper, settings) {\n        const imagePosition = this.getImagePosition(sourceImage, loadedImage, cropper, settings);\n        const width = imagePosition.x2 - imagePosition.x1;\n        const height = imagePosition.y2 - imagePosition.y1;\n        const cropCanvas = document.createElement('canvas');\n        cropCanvas.width = width;\n        cropCanvas.height = height;\n        const ctx = cropCanvas.getContext('2d');\n        if (!ctx) {\n            return null;\n        }\n        if (settings.backgroundColor != null) {\n            ctx.fillStyle = settings.backgroundColor;\n            ctx.fillRect(0, 0, width, height);\n        }\n        const scaleX = (settings.transform.scale || 1) * (settings.transform.flipH ? -1 : 1);\n        const scaleY = (settings.transform.scale || 1) * (settings.transform.flipV ? -1 : 1);\n        const transformedImage = loadedImage.transformed;\n        ctx.setTransform(scaleX, 0, 0, scaleY, transformedImage.size.width / 2, transformedImage.size.height / 2);\n        ctx.translate(-imagePosition.x1 / scaleX, -imagePosition.y1 / scaleY);\n        ctx.rotate((settings.transform.rotate || 0) * Math.PI / 180);\n        const { translateH, translateV } = this.getCanvasTranslate(sourceImage, loadedImage, settings);\n        ctx.drawImage(transformedImage.image, translateH - transformedImage.size.width / 2, translateV - transformedImage.size.height / 2);\n        const output = {\n            width, height,\n            imagePosition,\n            cropperPosition: { ...cropper }\n        };\n        if (settings.containWithinAspectRatio) {\n            output.offsetImagePosition = this.getOffsetImagePosition(sourceImage, loadedImage, cropper, settings);\n        }\n        const resizeRatio = this.getResizeRatio(width, height, settings);\n        if (resizeRatio !== 1) {\n            output.width = Math.round(width * resizeRatio);\n            output.height = settings.maintainAspectRatio\n                ? Math.round(output.width / settings.aspectRatio)\n                : Math.round(height * resizeRatio);\n            resizeCanvas(cropCanvas, output.width, output.height);\n        }\n        output.base64 = cropCanvas.toDataURL('image/' + settings.format, this.getQuality(settings));\n        return output;\n    }\n    getCanvasTranslate(sourceImage, loadedImage, settings) {\n        if (settings.transform.translateUnit === 'px') {\n            const ratio = this.getRatio(sourceImage, loadedImage);\n            return {\n                translateH: (settings.transform.translateH || 0) * ratio,\n                translateV: (settings.transform.translateV || 0) * ratio\n            };\n        }\n        else {\n            return {\n                translateH: settings.transform.translateH ? percentage(settings.transform.translateH, loadedImage.transformed.size.width) : 0,\n                translateV: settings.transform.translateV ? percentage(settings.transform.translateV, loadedImage.transformed.size.height) : 0\n            };\n        }\n    }\n    getRatio(sourceImage, loadedImage) {\n        const sourceImageElement = sourceImage.nativeElement;\n        return loadedImage.transformed.size.width / sourceImageElement.offsetWidth;\n    }\n    getImagePosition(sourceImage, loadedImage, cropper, settings) {\n        const ratio = this.getRatio(sourceImage, loadedImage);\n        const out = {\n            x1: Math.round(cropper.x1 * ratio),\n            y1: Math.round(cropper.y1 * ratio),\n            x2: Math.round(cropper.x2 * ratio),\n            y2: Math.round(cropper.y2 * ratio)\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getOffsetImagePosition(sourceImage, loadedImage, cropper, settings) {\n        const canvasRotation = settings.canvasRotation + loadedImage.exifTransform.rotate;\n        const sourceImageElement = sourceImage.nativeElement;\n        const ratio = loadedImage.transformed.size.width / sourceImageElement.offsetWidth;\n        let offsetX;\n        let offsetY;\n        if (canvasRotation % 2) {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.height) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.width) / 2;\n        }\n        else {\n            offsetX = (loadedImage.transformed.size.width - loadedImage.original.size.width) / 2;\n            offsetY = (loadedImage.transformed.size.height - loadedImage.original.size.height) / 2;\n        }\n        const out = {\n            x1: Math.round(cropper.x1 * ratio) - offsetX,\n            y1: Math.round(cropper.y1 * ratio) - offsetY,\n            x2: Math.round(cropper.x2 * ratio) - offsetX,\n            y2: Math.round(cropper.y2 * ratio) - offsetY\n        };\n        if (!settings.containWithinAspectRatio) {\n            out.x1 = Math.max(out.x1, 0);\n            out.y1 = Math.max(out.y1, 0);\n            out.x2 = Math.min(out.x2, loadedImage.transformed.size.width);\n            out.y2 = Math.min(out.y2, loadedImage.transformed.size.height);\n        }\n        return out;\n    }\n    getResizeRatio(width, height, settings) {\n        const ratioWidth = settings.resizeToWidth / width;\n        const ratioHeight = settings.resizeToHeight / height;\n        const ratios = new Array();\n        if (settings.resizeToWidth > 0) {\n            ratios.push(ratioWidth);\n        }\n        if (settings.resizeToHeight > 0) {\n            ratios.push(ratioHeight);\n        }\n        const result = ratios.length === 0 ? 1 : Math.min(...ratios);\n        if (result > 1 && !settings.onlyScaleDown) {\n            return result;\n        }\n        return Math.min(result, 1);\n    }\n    getQuality(settings) {\n        return Math.min(1, Math.max(0, settings.imageQuality / 100));\n    }\n}\nCropService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass CropperPositionService {\n    resetCropperPosition(sourceImage, cropperPosition, settings) {\n        if (!sourceImage?.nativeElement) {\n            return;\n        }\n        const sourceImageElement = sourceImage.nativeElement;\n        if (settings.cropperStaticHeight && settings.cropperStaticWidth) {\n            cropperPosition.x1 = 0;\n            cropperPosition.x2 = sourceImageElement.offsetWidth > settings.cropperStaticWidth ?\n                settings.cropperStaticWidth : sourceImageElement.offsetWidth;\n            cropperPosition.y1 = 0;\n            cropperPosition.y2 = sourceImageElement.offsetHeight > settings.cropperStaticHeight ?\n                settings.cropperStaticHeight : sourceImageElement.offsetHeight;\n        }\n        else {\n            const cropperWidth = Math.min(settings.cropperScaledMaxWidth, sourceImageElement.offsetWidth);\n            const cropperHeight = Math.min(settings.cropperScaledMaxHeight, sourceImageElement.offsetHeight);\n            if (!settings.maintainAspectRatio) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n            }\n            else if (sourceImageElement.offsetWidth / settings.aspectRatio < sourceImageElement.offsetHeight) {\n                cropperPosition.x1 = 0;\n                cropperPosition.x2 = cropperWidth;\n                const cropperHeightWithAspectRatio = cropperWidth / settings.aspectRatio;\n                cropperPosition.y1 = (sourceImageElement.offsetHeight - cropperHeightWithAspectRatio) / 2;\n                cropperPosition.y2 = cropperPosition.y1 + cropperHeightWithAspectRatio;\n            }\n            else {\n                cropperPosition.y1 = 0;\n                cropperPosition.y2 = cropperHeight;\n                const cropperWidthWithAspectRatio = cropperHeight * settings.aspectRatio;\n                cropperPosition.x1 = (sourceImageElement.offsetWidth - cropperWidthWithAspectRatio) / 2;\n                cropperPosition.x2 = cropperPosition.x1 + cropperWidthWithAspectRatio;\n            }\n        }\n    }\n    move(event, moveStart, cropperPosition) {\n        const diffX = this.getClientX(event) - moveStart.clientX;\n        const diffY = this.getClientY(event) - moveStart.clientY;\n        cropperPosition.x1 = moveStart.x1 + diffX;\n        cropperPosition.y1 = moveStart.y1 + diffY;\n        cropperPosition.x2 = moveStart.x2 + diffX;\n        cropperPosition.y2 = moveStart.y2 + diffY;\n    }\n    resize(event, moveStart, cropperPosition, maxSize, settings) {\n        const moveX = this.getClientX(event) - moveStart.clientX;\n        const moveY = this.getClientY(event) - moveStart.clientY;\n        switch (moveStart.position) {\n            case 'left':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                break;\n            case 'topleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'top':\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'topright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y1 = Math.min(Math.max(moveStart.y1 + moveY, cropperPosition.y2 - settings.cropperScaledMaxHeight), cropperPosition.y2 - settings.cropperScaledMinHeight);\n                break;\n            case 'right':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                break;\n            case 'bottomright':\n                cropperPosition.x2 = Math.max(Math.min(moveStart.x2 + moveX, cropperPosition.x1 + settings.cropperScaledMaxWidth), cropperPosition.x1 + settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottom':\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'bottomleft':\n                cropperPosition.x1 = Math.min(Math.max(moveStart.x1 + moveX, cropperPosition.x2 - settings.cropperScaledMaxWidth), cropperPosition.x2 - settings.cropperScaledMinWidth);\n                cropperPosition.y2 = Math.max(Math.min(moveStart.y2 + moveY, cropperPosition.y1 + settings.cropperScaledMaxHeight), cropperPosition.y1 + settings.cropperScaledMinHeight);\n                break;\n            case 'center':\n                const scale = event.scale;\n                const newWidth = Math.min(Math.max(settings.cropperScaledMinWidth, (Math.abs(moveStart.x2 - moveStart.x1)) * scale), settings.cropperScaledMaxWidth);\n                const newHeight = Math.min(Math.max(settings.cropperScaledMinHeight, (Math.abs(moveStart.y2 - moveStart.y1)) * scale), settings.cropperScaledMaxHeight);\n                cropperPosition.x1 = moveStart.clientX - newWidth / 2;\n                cropperPosition.x2 = moveStart.clientX + newWidth / 2;\n                cropperPosition.y1 = moveStart.clientY - newHeight / 2;\n                cropperPosition.y2 = moveStart.clientY + newHeight / 2;\n                if (cropperPosition.x1 < 0) {\n                    cropperPosition.x2 -= cropperPosition.x1;\n                    cropperPosition.x1 = 0;\n                }\n                else if (cropperPosition.x2 > maxSize.width) {\n                    cropperPosition.x1 -= (cropperPosition.x2 - maxSize.width);\n                    cropperPosition.x2 = maxSize.width;\n                }\n                if (cropperPosition.y1 < 0) {\n                    cropperPosition.y2 -= cropperPosition.y1;\n                    cropperPosition.y1 = 0;\n                }\n                else if (cropperPosition.y2 > maxSize.height) {\n                    cropperPosition.y1 -= (cropperPosition.y2 - maxSize.height);\n                    cropperPosition.y2 = maxSize.height;\n                }\n                break;\n        }\n        if (settings.maintainAspectRatio) {\n            this.checkAspectRatio(moveStart.position, cropperPosition, maxSize, settings);\n        }\n    }\n    checkAspectRatio(position, cropperPosition, maxSize, settings) {\n        let overflowX = 0;\n        let overflowY = 0;\n        switch (position) {\n            case 'top':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : (overflowX / settings.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'topright':\n                cropperPosition.y1 = cropperPosition.y2 - (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y1 += (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x2 -= (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                overflowX = Math.max(0 - cropperPosition.x1, 0);\n                overflowY = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    cropperPosition.x1 += (overflowY * settings.aspectRatio) > overflowX ? (overflowY * settings.aspectRatio) : overflowX;\n                    cropperPosition.y2 -= (overflowY * settings.aspectRatio) > overflowX ? overflowY : overflowX / settings.aspectRatio;\n                }\n                break;\n            case 'center':\n                cropperPosition.x2 = cropperPosition.x1 + (cropperPosition.y2 - cropperPosition.y1) * settings.aspectRatio;\n                cropperPosition.y2 = cropperPosition.y1 + (cropperPosition.x2 - cropperPosition.x1) / settings.aspectRatio;\n                const overflowX1 = Math.max(0 - cropperPosition.x1, 0);\n                const overflowX2 = Math.max(cropperPosition.x2 - maxSize.width, 0);\n                const overflowY1 = Math.max(cropperPosition.y2 - maxSize.height, 0);\n                const overflowY2 = Math.max(0 - cropperPosition.y1, 0);\n                if (overflowX1 > 0 || overflowX2 > 0 || overflowY1 > 0 || overflowY2 > 0) {\n                    cropperPosition.x1 += (overflowY1 * settings.aspectRatio) > overflowX1 ? (overflowY1 * settings.aspectRatio) : overflowX1;\n                    cropperPosition.x2 -= (overflowY2 * settings.aspectRatio) > overflowX2 ? (overflowY2 * settings.aspectRatio) : overflowX2;\n                    cropperPosition.y1 += (overflowY2 * settings.aspectRatio) > overflowX2 ? overflowY2 : overflowX2 / settings.aspectRatio;\n                    cropperPosition.y2 -= (overflowY1 * settings.aspectRatio) > overflowX1 ? overflowY1 : overflowX1 / settings.aspectRatio;\n                }\n                break;\n        }\n    }\n    getClientX(event) {\n        return event.touches?.[0].clientX || event.clientX || 0;\n    }\n    getClientY(event) {\n        return event.touches?.[0].clientY || event.clientY || 0;\n    }\n}\nCropperPositionService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropperPositionService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nCropperPositionService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropperPositionService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: CropperPositionService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n// Black 2x1 JPEG, with the following meta information set:\n// - EXIF Orientation: 6 (Rotated 90° CCW)\n// Source: https://github.com/blueimp/JavaScript-Load-Image\nconst testAutoOrientationImageURL = 'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n    'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n    'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n    'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n    'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n    'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\nfunction supportsAutomaticRotation() {\n    return new Promise((resolve) => {\n        const img = new Image();\n        img.onload = () => {\n            // Check if browser supports automatic image orientation:\n            const supported = img.width === 1 && img.height === 2;\n            resolve(supported);\n        };\n        img.src = testAutoOrientationImageURL;\n    });\n}\nfunction getTransformationsFromExifData(exifRotationOrBase64Image) {\n    if (typeof exifRotationOrBase64Image === 'string') {\n        exifRotationOrBase64Image = getExifRotation(exifRotationOrBase64Image);\n    }\n    switch (exifRotationOrBase64Image) {\n        case 2:\n            return { rotate: 0, flip: true };\n        case 3:\n            return { rotate: 2, flip: false };\n        case 4:\n            return { rotate: 2, flip: true };\n        case 5:\n            return { rotate: 1, flip: true };\n        case 6:\n            return { rotate: 1, flip: false };\n        case 7:\n            return { rotate: 3, flip: true };\n        case 8:\n            return { rotate: 3, flip: false };\n        default:\n            return { rotate: 0, flip: false };\n    }\n}\nfunction getExifRotation(imageBase64) {\n    const view = new DataView(base64ToArrayBuffer(imageBase64));\n    if (view.getUint16(0, false) !== 0xFFD8) {\n        return -2;\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n        if (view.getUint16(offset + 2, false) <= 8)\n            return -1;\n        const marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker == 0xFFE1) {\n            if (view.getUint32(offset += 2, false) !== 0x45786966) {\n                return -1;\n            }\n            const little = view.getUint16(offset += 6, false) == 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            const tags = view.getUint16(offset, little);\n            offset += 2;\n            for (let i = 0; i < tags; i++) {\n                if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                    return view.getUint16(offset + (i * 12) + 8, little);\n                }\n            }\n        }\n        else if ((marker & 0xFF00) !== 0xFF00) {\n            break;\n        }\n        else {\n            offset += view.getUint16(offset, false);\n        }\n    }\n    return -1;\n}\nfunction base64ToArrayBuffer(imageBase64) {\n    imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    const binaryString = atob(imageBase64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n\nclass LoadImageService {\n    constructor() {\n        this.autoRotateSupported = supportsAutomaticRotation();\n    }\n    loadImageFile(file, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const fileReader = new FileReader();\n            fileReader.onload = (event) => {\n                this.loadImage(event.target.result, file.type, cropperSettings)\n                    .then(resolve)\n                    .catch(reject);\n            };\n            fileReader.readAsDataURL(file);\n        });\n    }\n    loadImage(imageBase64, imageType, cropperSettings) {\n        if (!this.isValidImageType(imageType)) {\n            return Promise.reject(new Error('Invalid image type'));\n        }\n        return this.loadBase64Image(imageBase64, cropperSettings);\n    }\n    isValidImageType(type) {\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(type);\n    }\n    loadImageFromURL(url, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onerror = () => reject;\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                const context = canvas.getContext('2d');\n                canvas.width = img.width;\n                canvas.height = img.height;\n                context?.drawImage(img, 0, 0);\n                this.loadBase64Image(canvas.toDataURL(), cropperSettings).then(resolve);\n            };\n            img.crossOrigin = 'anonymous';\n            img.src = url;\n        });\n    }\n    loadBase64Image(imageBase64, cropperSettings) {\n        return new Promise((resolve, reject) => {\n            const originalImage = new Image();\n            originalImage.onload = () => resolve({\n                originalImage,\n                originalBase64: imageBase64\n            });\n            originalImage.onerror = reject;\n            originalImage.src = imageBase64;\n        }).then((res) => this.transformImageBase64(res, cropperSettings));\n    }\n    async transformImageBase64(res, cropperSettings) {\n        const autoRotate = await this.autoRotateSupported;\n        const exifTransform = await getTransformationsFromExifData(autoRotate ? -1 : res.originalBase64);\n        if (!res.originalImage || !res.originalImage.complete) {\n            return Promise.reject(new Error('No image loaded'));\n        }\n        const loadedImage = {\n            original: {\n                base64: res.originalBase64,\n                image: res.originalImage,\n                size: {\n                    width: res.originalImage.naturalWidth,\n                    height: res.originalImage.naturalHeight\n                }\n            },\n            exifTransform\n        };\n        return this.transformLoadedImage(loadedImage, cropperSettings);\n    }\n    async transformLoadedImage(loadedImage, cropperSettings) {\n        const canvasRotation = cropperSettings.canvasRotation + loadedImage.exifTransform.rotate;\n        const originalSize = {\n            width: loadedImage.original.image.naturalWidth,\n            height: loadedImage.original.image.naturalHeight\n        };\n        if (canvasRotation === 0 && !loadedImage.exifTransform.flip && !cropperSettings.containWithinAspectRatio) {\n            return {\n                original: {\n                    base64: loadedImage.original.base64,\n                    image: loadedImage.original.image,\n                    size: { ...originalSize }\n                },\n                transformed: {\n                    base64: loadedImage.original.base64,\n                    image: loadedImage.original.image,\n                    size: { ...originalSize }\n                },\n                exifTransform: loadedImage.exifTransform\n            };\n        }\n        const transformedSize = this.getTransformedSize(originalSize, loadedImage.exifTransform, cropperSettings);\n        const canvas = document.createElement('canvas');\n        canvas.width = transformedSize.width;\n        canvas.height = transformedSize.height;\n        const ctx = canvas.getContext('2d');\n        ctx?.setTransform(loadedImage.exifTransform.flip ? -1 : 1, 0, 0, 1, canvas.width / 2, canvas.height / 2);\n        ctx?.rotate(Math.PI * (canvasRotation / 2));\n        ctx?.drawImage(loadedImage.original.image, -originalSize.width / 2, -originalSize.height / 2);\n        const transformedBase64 = canvas.toDataURL();\n        const transformedImage = await this.loadImageFromBase64(transformedBase64);\n        return {\n            original: {\n                base64: loadedImage.original.base64,\n                image: loadedImage.original.image,\n                size: { ...originalSize }\n            },\n            transformed: {\n                base64: transformedBase64,\n                image: transformedImage,\n                size: {\n                    width: transformedImage.width,\n                    height: transformedImage.height\n                }\n            },\n            exifTransform: loadedImage.exifTransform\n        };\n    }\n    loadImageFromBase64(imageBase64) {\n        return new Promise(((resolve, reject) => {\n            const image = new Image();\n            image.onload = () => resolve(image);\n            image.onerror = reject;\n            image.src = imageBase64;\n        }));\n    }\n    getTransformedSize(originalSize, exifTransform, cropperSettings) {\n        const canvasRotation = cropperSettings.canvasRotation + exifTransform.rotate;\n        if (cropperSettings.containWithinAspectRatio) {\n            if (canvasRotation % 2) {\n                const minWidthToContain = originalSize.width * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.height / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.height, minWidthToContain),\n                    height: Math.max(originalSize.width, minHeightToContain)\n                };\n            }\n            else {\n                const minWidthToContain = originalSize.height * cropperSettings.aspectRatio;\n                const minHeightToContain = originalSize.width / cropperSettings.aspectRatio;\n                return {\n                    width: Math.max(originalSize.width, minWidthToContain),\n                    height: Math.max(originalSize.height, minHeightToContain)\n                };\n            }\n        }\n        if (canvasRotation % 2) {\n            return {\n                height: originalSize.width,\n                width: originalSize.height\n            };\n        }\n        return {\n            width: originalSize.width,\n            height: originalSize.height\n        };\n    }\n}\nLoadImageService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoadImageService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nLoadImageService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoadImageService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoadImageService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass ImageCropperComponent {\n    constructor(cropService, cropperPositionService, loadImageService, sanitizer, cd) {\n        this.cropService = cropService;\n        this.cropperPositionService = cropperPositionService;\n        this.loadImageService = loadImageService;\n        this.sanitizer = sanitizer;\n        this.cd = cd;\n        this.Hammer = window?.['Hammer'] || null;\n        this.settings = new CropperSettings();\n        this.setImageMaxSizeRetries = 0;\n        this.marginLeft = '0px';\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.moveTypes = MoveTypes;\n        this.imageVisible = false;\n        this.format = this.settings.format;\n        this.transform = {};\n        this.maintainAspectRatio = this.settings.maintainAspectRatio;\n        this.aspectRatio = this.settings.aspectRatio;\n        this.resizeToWidth = this.settings.resizeToWidth;\n        this.resizeToHeight = this.settings.resizeToHeight;\n        this.cropperMinWidth = this.settings.cropperMinWidth;\n        this.cropperMinHeight = this.settings.cropperMinHeight;\n        this.cropperMaxHeight = this.settings.cropperMaxHeight;\n        this.cropperMaxWidth = this.settings.cropperMaxWidth;\n        this.cropperStaticWidth = this.settings.cropperStaticWidth;\n        this.cropperStaticHeight = this.settings.cropperStaticHeight;\n        this.canvasRotation = this.settings.canvasRotation;\n        this.initialStepSize = this.settings.initialStepSize;\n        this.roundCropper = this.settings.roundCropper;\n        this.onlyScaleDown = this.settings.onlyScaleDown;\n        this.imageQuality = this.settings.imageQuality;\n        this.autoCrop = this.settings.autoCrop;\n        this.backgroundColor = this.settings.backgroundColor;\n        this.containWithinAspectRatio = this.settings.containWithinAspectRatio;\n        this.hideResizeSquares = this.settings.hideResizeSquares;\n        this.allowMoveImage = false;\n        this.cropper = {\n            x1: -100,\n            y1: -100,\n            x2: 10000,\n            y2: 10000\n        };\n        this.alignImage = this.settings.alignImage;\n        this.disabled = false;\n        this.imageCropped = new EventEmitter();\n        this.startCropImage = new EventEmitter();\n        this.imageLoaded = new EventEmitter();\n        this.cropperReady = new EventEmitter();\n        this.loadImageFailed = new EventEmitter();\n        this.transformChange = new EventEmitter();\n        this.reset();\n    }\n    ngOnChanges(changes) {\n        this.onChangesUpdateSettings(changes);\n        this.onChangesInputImage(changes);\n        if (this.loadedImage?.original.image.complete && (changes['containWithinAspectRatio'] || changes['canvasRotation'])) {\n            this.loadImageService\n                .transformLoadedImage(this.loadedImage, this.settings)\n                .then((res) => this.setLoadedImage(res))\n                .catch((err) => this.loadImageError(err));\n        }\n        if (changes['cropper'] || changes['maintainAspectRatio'] || changes['aspectRatio']) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            if (this.maintainAspectRatio && (changes['maintainAspectRatio'] || changes['aspectRatio'])) {\n                this.resetCropperPosition();\n            }\n            else if (changes['cropper']) {\n                this.checkCropperPosition(false);\n                this.doAutoCrop();\n            }\n            this.cd.markForCheck();\n        }\n        if (changes['transform']) {\n            this.transform = this.transform || {};\n            this.setCssTransform();\n            this.doAutoCrop();\n            this.cd.markForCheck();\n        }\n    }\n    onChangesUpdateSettings(changes) {\n        this.settings.setOptionsFromChanges(changes);\n        if (this.settings.cropperStaticHeight && this.settings.cropperStaticWidth) {\n            this.settings.setOptions({\n                hideResizeSquares: true,\n                cropperMinWidth: this.settings.cropperStaticWidth,\n                cropperMinHeight: this.settings.cropperStaticHeight,\n                cropperMaxHeight: this.settings.cropperStaticHeight,\n                cropperMaxWidth: this.settings.cropperStaticWidth,\n                maintainAspectRatio: false\n            });\n        }\n    }\n    onChangesInputImage(changes) {\n        if (changes['imageChangedEvent'] || changes['imageURL'] || changes['imageBase64'] || changes['imageFile']) {\n            this.reset();\n        }\n        if (changes['imageChangedEvent'] && this.isValidImageChangedEvent()) {\n            this.loadImageFile(this.imageChangedEvent.target.files[0]);\n        }\n        if (changes['imageURL'] && this.imageURL) {\n            this.loadImageFromURL(this.imageURL);\n        }\n        if (changes['imageBase64'] && this.imageBase64) {\n            this.loadBase64Image(this.imageBase64);\n        }\n        if (changes['imageFile'] && this.imageFile) {\n            this.loadImageFile(this.imageFile);\n        }\n    }\n    isValidImageChangedEvent() {\n        return this.imageChangedEvent?.target?.files?.length > 0;\n    }\n    setCssTransform() {\n        const translateUnit = this.transform?.translateUnit || '%';\n        this.safeTransformStyle = this.sanitizer.bypassSecurityTrustStyle('scaleX(' + (this.transform.scale || 1) * (this.transform.flipH ? -1 : 1) + ')' +\n            'scaleY(' + (this.transform.scale || 1) * (this.transform.flipV ? -1 : 1) + ')' +\n            'rotate(' + (this.transform.rotate || 0) + 'deg)' +\n            `translate(${this.transform.translateH || 0}${translateUnit}, ${this.transform.translateV || 0}${translateUnit})`);\n    }\n    ngOnInit() {\n        this.settings.stepSize = this.initialStepSize;\n        this.activatePinchGesture();\n    }\n    reset() {\n        this.imageVisible = false;\n        this.loadedImage = undefined;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n    loadImageFile(file) {\n        this.loadImageService\n            .loadImageFile(file, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadBase64Image(imageBase64) {\n        this.loadImageService\n            .loadBase64Image(imageBase64, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    loadImageFromURL(url) {\n        this.loadImageService\n            .loadImageFromURL(url, this.settings)\n            .then((res) => this.setLoadedImage(res))\n            .catch((err) => this.loadImageError(err));\n    }\n    setLoadedImage(loadedImage) {\n        this.loadedImage = loadedImage;\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(loadedImage.transformed.base64);\n        this.cd.markForCheck();\n    }\n    loadImageError(error) {\n        console.error(error);\n        this.loadImageFailed.emit();\n    }\n    imageLoadedInView() {\n        if (this.loadedImage != null) {\n            this.imageLoaded.emit(this.loadedImage);\n            this.setImageMaxSizeRetries = 0;\n            setTimeout(() => this.checkImageMaxSizeRecursively());\n        }\n    }\n    checkImageMaxSizeRecursively() {\n        if (this.setImageMaxSizeRetries > 40) {\n            this.loadImageFailed.emit();\n        }\n        else if (this.sourceImageLoaded()) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.setCropperScaledMaxSize();\n            this.resetCropperPosition();\n            this.cropperReady.emit({ ...this.maxSize });\n            this.cd.markForCheck();\n        }\n        else {\n            this.setImageMaxSizeRetries++;\n            setTimeout(() => this.checkImageMaxSizeRecursively(), 50);\n        }\n    }\n    sourceImageLoaded() {\n        return this.sourceImage?.nativeElement?.offsetWidth > 0;\n    }\n    onResize() {\n        if (!this.loadedImage) {\n            return;\n        }\n        this.resizeCropperPosition();\n        this.setMaxSize();\n        this.setCropperScaledMinSize();\n        this.setCropperScaledMaxSize();\n    }\n    activatePinchGesture() {\n        if (this.Hammer) {\n            const hammer = new this.Hammer(this.wrapper.nativeElement);\n            hammer.get('pinch').set({ enable: true });\n            hammer.on('pinchmove', this.onPinch.bind(this));\n            hammer.on('pinchend', this.pinchStop.bind(this));\n            hammer.on('pinchstart', this.startPinch.bind(this));\n        }\n        else if (isDevMode()) {\n            console.warn('[NgxImageCropper] Could not find HammerJS - Pinch Gesture won\\'t work');\n        }\n    }\n    resizeCropperPosition() {\n        const sourceImageElement = this.sourceImage.nativeElement;\n        if (this.maxSize.width !== sourceImageElement.offsetWidth || this.maxSize.height !== sourceImageElement.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * sourceImageElement.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * sourceImageElement.offsetHeight / this.maxSize.height;\n        }\n    }\n    resetCropperPosition() {\n        this.cropperPositionService.resetCropperPosition(this.sourceImage, this.cropper, this.settings);\n        this.doAutoCrop();\n        this.imageVisible = true;\n    }\n    keyboardAccess(event) {\n        this.changeKeyboardStepSize(event);\n        this.keyboardMoveCropper(event);\n    }\n    changeKeyboardStepSize(event) {\n        const key = +event.key;\n        if (key >= 1 && key <= 9) {\n            this.settings.stepSize = key;\n        }\n    }\n    keyboardMoveCropper(event) {\n        const keyboardWhiteList = ['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft'];\n        if (!(keyboardWhiteList.includes(event.key))) {\n            return;\n        }\n        const moveType = event.shiftKey ? MoveTypes.Resize : MoveTypes.Move;\n        const position = event.altKey ? getInvertedPositionForKey(event.key) : getPositionForKey(event.key);\n        const moveEvent = getEventForKey(event.key, this.settings.stepSize);\n        event.preventDefault();\n        event.stopPropagation();\n        this.startMove({ clientX: 0, clientY: 0 }, moveType, position);\n        this.moveImg(moveEvent);\n        this.moveStop();\n    }\n    startMove(event, moveType, position = null) {\n        if (this.disabled\n            || this.moveStart?.active && this.moveStart?.type === MoveTypes.Pinch\n            || moveType === MoveTypes.Drag && !this.allowMoveImage) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = {\n            active: true,\n            type: moveType,\n            position,\n            transform: { ...this.transform },\n            clientX: this.cropperPositionService.getClientX(event),\n            clientY: this.cropperPositionService.getClientY(event),\n            ...this.cropper\n        };\n    }\n    startPinch(event) {\n        if (!this.safeImgDataUrl) {\n            return;\n        }\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        this.moveStart = {\n            active: true,\n            type: MoveTypes.Pinch,\n            position: 'center',\n            clientX: this.cropper.x1 + (this.cropper.x2 - this.cropper.x1) / 2,\n            clientY: this.cropper.y1 + (this.cropper.y2 - this.cropper.y1) / 2,\n            ...this.cropper\n        };\n    }\n    moveImg(event) {\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Move) {\n                this.cropperPositionService.move(event, this.moveStart, this.cropper);\n                this.checkCropperPosition(true);\n            }\n            else if (this.moveStart.type === MoveTypes.Resize) {\n                if (!this.cropperStaticWidth && !this.cropperStaticHeight) {\n                    this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                }\n                this.checkCropperPosition(false);\n            }\n            else if (this.moveStart.type === MoveTypes.Drag) {\n                const diffX = this.cropperPositionService.getClientX(event) - this.moveStart.clientX;\n                const diffY = this.cropperPositionService.getClientY(event) - this.moveStart.clientY;\n                this.transform = {\n                    ...this.transform,\n                    translateH: (this.moveStart.transform?.translateH || 0) + diffX,\n                    translateV: (this.moveStart.transform?.translateV || 0) + diffY\n                };\n                this.setCssTransform();\n            }\n            this.cd.detectChanges();\n        }\n    }\n    onPinch(event) {\n        if (this.moveStart.active) {\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            if (this.moveStart.type === MoveTypes.Pinch) {\n                this.cropperPositionService.resize(event, this.moveStart, this.cropper, this.maxSize, this.settings);\n                this.checkCropperPosition(false);\n            }\n            this.cd.detectChanges();\n        }\n    }\n    setMaxSize() {\n        if (this.sourceImage) {\n            const sourceImageElement = this.sourceImage.nativeElement;\n            this.maxSize.width = sourceImageElement.offsetWidth;\n            this.maxSize.height = sourceImageElement.offsetHeight;\n            this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n        }\n    }\n    setCropperScaledMinSize() {\n        if (this.loadedImage?.transformed?.image) {\n            this.setCropperScaledMinWidth();\n            this.setCropperScaledMinHeight();\n        }\n        else {\n            this.settings.cropperScaledMinWidth = 20;\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMinWidth() {\n        this.settings.cropperScaledMinWidth = this.cropperMinWidth > 0\n            ? Math.max(20, this.cropperMinWidth / this.loadedImage.transformed.image.width * this.maxSize.width)\n            : 20;\n    }\n    setCropperScaledMinHeight() {\n        if (this.maintainAspectRatio) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.settings.cropperScaledMinWidth / this.aspectRatio);\n        }\n        else if (this.cropperMinHeight > 0) {\n            this.settings.cropperScaledMinHeight = Math.max(20, this.cropperMinHeight / this.loadedImage.transformed.image.height * this.maxSize.height);\n        }\n        else {\n            this.settings.cropperScaledMinHeight = 20;\n        }\n    }\n    setCropperScaledMaxSize() {\n        if (this.loadedImage?.transformed?.image) {\n            const ratio = this.loadedImage.transformed.size.width / this.maxSize.width;\n            this.settings.cropperScaledMaxWidth = this.cropperMaxWidth > 20 ? this.cropperMaxWidth / ratio : this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.cropperMaxHeight > 20 ? this.cropperMaxHeight / ratio : this.maxSize.height;\n            if (this.maintainAspectRatio) {\n                if (this.settings.cropperScaledMaxWidth > this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxWidth = this.settings.cropperScaledMaxHeight * this.aspectRatio;\n                }\n                else if (this.settings.cropperScaledMaxWidth < this.settings.cropperScaledMaxHeight * this.aspectRatio) {\n                    this.settings.cropperScaledMaxHeight = this.settings.cropperScaledMaxWidth / this.aspectRatio;\n                }\n            }\n        }\n        else {\n            this.settings.cropperScaledMaxWidth = this.maxSize.width;\n            this.settings.cropperScaledMaxHeight = this.maxSize.height;\n        }\n    }\n    checkCropperPosition(maintainSize = false) {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n    moveStop() {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            if (this.moveStart?.type === MoveTypes.Drag) {\n                this.transformChange.emit(this.transform);\n            }\n            else {\n                this.doAutoCrop();\n            }\n        }\n    }\n    pinchStop() {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.doAutoCrop();\n        }\n    }\n    doAutoCrop() {\n        if (this.autoCrop) {\n            this.crop();\n        }\n    }\n    crop() {\n        if (this.loadedImage?.transformed?.image != null) {\n            this.startCropImage.emit();\n            const output = this.cropService.crop(this.sourceImage, this.loadedImage, this.cropper, this.settings);\n            if (output != null) {\n                this.imageCropped.emit(output);\n            }\n            return output;\n        }\n        return null;\n    }\n}\nImageCropperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperComponent, deps: [{ token: CropService }, { token: CropperPositionService }, { token: LoadImageService }, { token: i4.DomSanitizer }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\nImageCropperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: ImageCropperComponent, selector: \"image-cropper\", inputs: { imageChangedEvent: \"imageChangedEvent\", imageURL: \"imageURL\", imageBase64: \"imageBase64\", imageFile: \"imageFile\", format: \"format\", transform: \"transform\", maintainAspectRatio: \"maintainAspectRatio\", aspectRatio: \"aspectRatio\", resizeToWidth: \"resizeToWidth\", resizeToHeight: \"resizeToHeight\", cropperMinWidth: \"cropperMinWidth\", cropperMinHeight: \"cropperMinHeight\", cropperMaxHeight: \"cropperMaxHeight\", cropperMaxWidth: \"cropperMaxWidth\", cropperStaticWidth: \"cropperStaticWidth\", cropperStaticHeight: \"cropperStaticHeight\", canvasRotation: \"canvasRotation\", initialStepSize: \"initialStepSize\", roundCropper: \"roundCropper\", onlyScaleDown: \"onlyScaleDown\", imageQuality: \"imageQuality\", autoCrop: \"autoCrop\", backgroundColor: \"backgroundColor\", containWithinAspectRatio: \"containWithinAspectRatio\", hideResizeSquares: \"hideResizeSquares\", allowMoveImage: \"allowMoveImage\", cropper: \"cropper\", alignImage: \"alignImage\", disabled: \"disabled\" }, outputs: { imageCropped: \"imageCropped\", startCropImage: \"startCropImage\", imageLoaded: \"imageLoaded\", cropperReady: \"cropperReady\", loadImageFailed: \"loadImageFailed\", transformChange: \"transformChange\" }, host: { listeners: { \"window:resize\": \"onResize()\", \"document:mousemove\": \"moveImg($event)\", \"document:touchmove\": \"moveImg($event)\", \"document:mouseup\": \"moveStop()\", \"document:touchend\": \"moveStop()\" }, properties: { \"style.text-align\": \"this.alignImage\", \"class.disabled\": \"this.disabled\" } }, viewQueries: [{ propertyName: \"wrapper\", first: true, predicate: [\"wrapper\"], descendants: true, static: true }, { propertyName: \"sourceImage\", first: true, predicate: [\"sourceImage\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";top:0;bottom:0;left:0;right:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}\\n\"], directives: [{ type: i5.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'image-cropper', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div\\n  [style.background]=\\\"imageVisible && backgroundColor\\\"\\n  #wrapper\\n>\\n  <img\\n    #sourceImage\\n    class=\\\"ngx-ic-source-image\\\"\\n    *ngIf=\\\"safeImgDataUrl\\\"\\n    [src]=\\\"safeImgDataUrl\\\"\\n    [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n    [style.transform]=\\\"safeTransformStyle\\\"\\n    [class.ngx-ic-draggable]=\\\"!disabled && allowMoveImage\\\"\\n    (load)=\\\"imageLoadedInView()\\\"\\n    (mousedown)=\\\"startMove($event, moveTypes.Drag)\\\"\\n    (touchstart)=\\\"startMove($event, moveTypes.Drag)\\\"\\n  >\\n  <div\\n    class=\\\"ngx-ic-overlay\\\"\\n    [style.width.px]=\\\"maxSize.width\\\"\\n    [style.height.px]=\\\"maxSize.height\\\"\\n    [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n  ></div>\\n  <div class=\\\"ngx-ic-cropper\\\"\\n       *ngIf=\\\"imageVisible\\\"\\n       [class.ngx-ic-round]=\\\"roundCropper\\\"\\n       [style.top.px]=\\\"cropper.y1\\\"\\n       [style.left.px]=\\\"cropper.x1\\\"\\n       [style.width.px]=\\\"cropper.x2 - cropper.x1\\\"\\n       [style.height.px]=\\\"cropper.y2 - cropper.y1\\\"\\n       [style.margin-left]=\\\"alignImage === 'center' ? marginLeft : null\\\"\\n       [style.visibility]=\\\"imageVisible ? 'visible' : 'hidden'\\\"\\n       (keydown)=\\\"keyboardAccess($event)\\\"\\n       tabindex=\\\"0\\\"\\n  >\\n    <div\\n      (mousedown)=\\\"startMove($event, moveTypes.Move)\\\"\\n      (touchstart)=\\\"startMove($event, moveTypes.Move)\\\"\\n      class=\\\"ngx-ic-move\\\">\\n    </div>\\n    <ng-container *ngIf=\\\"!hideResizeSquares\\\">\\n            <span class=\\\"ngx-ic-resize ngx-ic-topleft\\\"\\n                  (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\"\\n                  (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-top\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-topright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'topright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-right\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomright\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomright')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottom\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-bottomleft\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottomleft')\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize ngx-ic-left\\\">\\n                <span class=\\\"ngx-ic-square\\\"></span>\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-top\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'top')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'top')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-right\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'right')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'right')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-bottom\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'bottom')\\\">\\n            </span>\\n      <span class=\\\"ngx-ic-resize-bar ngx-ic-left\\\"\\n            (mousedown)=\\\"startMove($event, moveTypes.Resize, 'left')\\\"\\n            (touchstart)=\\\"startMove($event, moveTypes.Resize, 'left')\\\">\\n            </span>\\n    </ng-container>\\n  </div>\\n</div>\\n\", styles: [\":host{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}:host>div{width:100%;position:relative}:host>div img.ngx-ic-source-image{max-width:100%;max-height:100%;transform-origin:center}:host>div img.ngx-ic-source-image.ngx-ic-draggable{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}:host .ngx-ic-overlay{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}:host .ngx-ic-cropper{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){:host .ngx-ic-cropper{outline-width:100vh}}:host .ngx-ic-cropper:after{position:absolute;content:\\\"\\\";top:0;bottom:0;left:0;right:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}:host .ngx-ic-cropper .ngx-ic-move{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}:host .ngx-ic-cropper:focus .ngx-ic-move{border-color:#1e90ff;border-width:2px}:host .ngx-ic-cropper .ngx-ic-resize{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize .ngx-ic-square{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topleft{top:-12px;left:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-top{top:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-topright{top:-12px;right:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-right{top:calc(50% - 12px);right:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomright{bottom:-12px;right:-12px;cursor:nwse-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottom{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-bottomleft{bottom:-12px;left:-12px;cursor:nesw-resize}:host .ngx-ic-cropper .ngx-ic-resize.ngx-ic-left{top:calc(50% - 12px);left:-12px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar{position:absolute;z-index:1}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-top{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-right{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-bottom{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}:host .ngx-ic-cropper .ngx-ic-resize-bar.ngx-ic-left{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}:host .ngx-ic-cropper.ngx-ic-round{outline-color:transparent}:host .ngx-ic-cropper.ngx-ic-round:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){:host .ngx-ic-cropper.ngx-ic-round:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}:host .ngx-ic-cropper.ngx-ic-round .ngx-ic-move{border-radius:100%}:host.disabled .ngx-ic-cropper .ngx-ic-resize,:host.disabled .ngx-ic-cropper .ngx-ic-resize-bar,:host.disabled .ngx-ic-cropper .ngx-ic-move{display:none}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: CropService }, { type: CropperPositionService }, { type: LoadImageService }, { type: i4.DomSanitizer }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { wrapper: [{\n                type: ViewChild,\n                args: ['wrapper', { static: true }]\n            }], sourceImage: [{\n                type: ViewChild,\n                args: ['sourceImage', { static: false }]\n            }], imageChangedEvent: [{\n                type: Input\n            }], imageURL: [{\n                type: Input\n            }], imageBase64: [{\n                type: Input\n            }], imageFile: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], transform: [{\n                type: Input\n            }], maintainAspectRatio: [{\n                type: Input\n            }], aspectRatio: [{\n                type: Input\n            }], resizeToWidth: [{\n                type: Input\n            }], resizeToHeight: [{\n                type: Input\n            }], cropperMinWidth: [{\n                type: Input\n            }], cropperMinHeight: [{\n                type: Input\n            }], cropperMaxHeight: [{\n                type: Input\n            }], cropperMaxWidth: [{\n                type: Input\n            }], cropperStaticWidth: [{\n                type: Input\n            }], cropperStaticHeight: [{\n                type: Input\n            }], canvasRotation: [{\n                type: Input\n            }], initialStepSize: [{\n                type: Input\n            }], roundCropper: [{\n                type: Input\n            }], onlyScaleDown: [{\n                type: Input\n            }], imageQuality: [{\n                type: Input\n            }], autoCrop: [{\n                type: Input\n            }], backgroundColor: [{\n                type: Input\n            }], containWithinAspectRatio: [{\n                type: Input\n            }], hideResizeSquares: [{\n                type: Input\n            }], allowMoveImage: [{\n                type: Input\n            }], cropper: [{\n                type: Input\n            }], alignImage: [{\n                type: HostBinding,\n                args: ['style.text-align']\n            }, {\n                type: Input\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.disabled']\n            }, {\n                type: Input\n            }], imageCropped: [{\n                type: Output\n            }], startCropImage: [{\n                type: Output\n            }], imageLoaded: [{\n                type: Output\n            }], cropperReady: [{\n                type: Output\n            }], loadImageFailed: [{\n                type: Output\n            }], transformChange: [{\n                type: Output\n            }], onResize: [{\n                type: HostListener,\n                args: ['window:resize']\n            }], moveImg: [{\n                type: HostListener,\n                args: ['document:mousemove', ['$event']]\n            }, {\n                type: HostListener,\n                args: ['document:touchmove', ['$event']]\n            }], moveStop: [{\n                type: HostListener,\n                args: ['document:mouseup']\n            }, {\n                type: HostListener,\n                args: ['document:touchend']\n            }] } });\n\nclass ImageCropperModule {\n}\nImageCropperModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nImageCropperModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperModule, declarations: [ImageCropperComponent], imports: [CommonModule], exports: [ImageCropperComponent] });\nImageCropperModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperModule, imports: [[\n            CommonModule\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: ImageCropperModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule\n                    ],\n                    declarations: [\n                        ImageCropperComponent,\n                    ],\n                    exports: [\n                        ImageCropperComponent\n                    ]\n                }]\n        }] });\n\nfunction base64ToFile(base64Image) {\n    const split = base64Image.split(',');\n    const type = split[0].replace('data:', '').replace(';base64', '');\n    const byteString = atob(split[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type });\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CropService, ImageCropperComponent, ImageCropperModule, base64ToFile, resizeCanvas };\n//# sourceMappingURL=ngx-image-cropper.mjs.map\n","export default \"ion-content {\\n  background: rgba(8, 8, 8, 0.34);\\n  --background: rgba(24, 24, 24, 0.075);\\n  height: 100%;\\n}\\n\\n.uploaddiv {\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  margin: auto;\\n  position: relative;\\n  width: 100%;\\n  overflow: hidden;\\n  z-index: 99999;\\n  padding: 10px 12px;\\n}\\n\\n.profileimg {\\n  border-radius: 15px;\\n  margin: auto;\\n  display: table;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlY3JvcHBlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrQkFBQTtFQUNBLHFDQUFBO0VBQ0EsWUFBQTtBQUNKOztBQUNBO0VBQ0ksd0JBQUE7RUFBQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtBQUVKOztBQUFBO0VBQ0ksbUJBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQUdKIiwiZmlsZSI6ImltYWdlY3JvcHBlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XHJcbiAgICBiYWNrZ3JvdW5kOiByZ2IoOCA4IDggLyAzNCUpO1xyXG4gICAgLS1iYWNrZ3JvdW5kOiByZ2JhKDI0LCAyNCwgMjQsIDAuMDc1KTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICB9XHJcbi51cGxvYWRkaXYge1xyXG4gICAgaGVpZ2h0OiBmaXQtY29udGVudDtcclxuICAgIG1hcmdpbjogYXV0bztcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHotaW5kZXg6IDk5OTk5O1xyXG4gICAgcGFkZGluZzogMTBweCAxMnB4O1xyXG59XHJcbi5wcm9maWxlaW1nIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbiAgICBtYXJnaW46IGF1dG87XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxufSJdfQ== */\";","export default \"<ion-content>\\n  <div class=\\\"ht_40\\\"></div>\\n  <ion-row>\\n    <ion-col>\\n      <ion-button *ngIf=\\\"!Myimage && cropImage\\\" style=\\\"width: 100%;\\\" color=\\\"danger\\\" (click)=\\\"clear()\\\">\\n        <ion-icon name=\\\"close\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n    <ion-col>\\n      <ion-button *ngIf=\\\"!Myimage && cropImage\\\" style=\\\"width: 100%;\\\" color=\\\"success\\\" (click)=\\\"save()\\\">\\n        <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n  <div class=\\\"uploaddiv\\\" (click)=\\\"opengallery()\\\">\\n    <image-cropper *ngIf=\\\"!Myimage && cropImage\\\" class=\\\"profileimg\\\" [imageBase64]=\\\"cropImage\\\" [maintainAspectRatio]=\\\"false\\\"\\n    [aspectRatio]=\\\"4 / 3\\\"\\n      format=\\\"png\\\" (imageCropped)=\\\"imageCropped($event)\\\" outputType=\\\"base64\\\">\\n    </image-cropper>\\n\\n    <img *ngIf=\\\"Myimage\\\" src=\\\"{{Myimage}}\\\" class=\\\"profileimg\\\">\\n  </div>\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}